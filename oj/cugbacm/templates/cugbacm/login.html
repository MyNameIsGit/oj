<!DOCTYPE html>
<html lang="zh-cn">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta http-equiv="X-UA-Compatible" content="IE=9">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="cugbacm" >
    <link rel="shortcut icon" href="/site_media/docs-assets/ico/favicon.png">
    <title>Login</title>

    <!-- Bootstrap core CSS -->
    <link href="/site_media/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="/site_media/Flat-UI-master/dist/css/flat-ui.css" rel="stylesheet">
    <link href="/site_media/dist/css/signin.css" rel="stylesheet">
    <link href="/site_media/Flat-UI-master/css/demo.css" rel="stylesheet">
    <link href="/site_media/iCheck-master/skins/flat/green.css" rel="stylesheet">
   <!-- Just for debugging purposes. Don't actually copy this line! -->
    <!--[if lt IE 9]><script src="../../docs-assets/js/ie8-responsive-file-warning.js"></script><![endif]-->

    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="/site_media/dist/js/html5shiv.min.js"></script>
      <script src="/site_media/dist/js/respond.min.js"></script>
    <![endif]-->
  </head>

  <body>
    <button type="button" class="btn btn-primary btn-lg" data-toggle="modal" data-target="#myModal">
        Test For Register
    </button>
    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
            <center> <h4 class="modal-title">Register</h4></center>
          </div>
          <div class="modal-body">
            <div class="row">
            <div class="col-md-4 col-md-offset-4"> 
              <form class="form-horizontal" role="form" action="" method="post">{% csrf_token %} 
               <div class="form-group">
                 <input type="text" id="userID" class="form-control"  onBlur="checkID()" placeholder="userId (Your studentID)"   name="userID" required autofocus>
               </div>
               <div class="form-group">
                 <input type="password" class="form-control" placeholder="Password (length > 10)" name="password" required>
               </div>
               <div class="form-group">
                 <input type="password" class="form-control" placeholder="Confirm Password" name="confirmPassword" required>
               </div>
               <div class="form-group">
                 <input type="text" class="form-control" placeholder="Session" name="session" required>
               </div>
               <div class="form-group">
                 <input type="text" class="form-control" placeholder="Specialty" name="specialty" required>
               </div>
               <div class="form-group">
                 <input type="text" class="form-control" placeholder="Tel" name="tel" required>
               </div>
               <div class="form-group">
                 <input type="email" class="form-control" placeholder="Email" name="email" required>
               </div>
               <div class="form-group">
                 <input type="text" class="form-control" placeholder="Nickname" name="nickname" required>
               </div>
            </form>
           </div>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            <button type="button" class="btn btn-primary">Save changes</button>
          </div>
        </div>
      </div>
      </div>
    </div>
  <div class="container">
    <form class="" role="form" action="/index/login/" method="post">{% csrf_token %}
    <div class="login">
      <div class="login-screen">
        <div class="login-icon">
          <img src="/site_media/Flat-UI-master/images/icons/png/Toilet-Paper.png" alt="Welcome to OJ 2.0" />
          <h4>Welcome to <small>OJ 2.0</small></h4>
        </div>
        <div class="login-form">
           <div class="form-group">
             <input type="text" id = "userid" class="form-control login-field" placeholder="UserID" name="userID" required autofocus />
           </div>
           <div class="form-group">
             <input type="password" id = "password"  class="form-control login-field" placeholder="Password" name="password" required />
           </div>
           <div class="form-group">
             <input type="checkbox"/><font style="color:#1abc9c; font-size:16px;"> &nbsp;&nbsp; Remember me </font>
           </div>  
           <div class="form-group">
             <button class="btn btn-lg btn-primary btn-block" id = "submit" type="button">Sign in</button></div>
             <input class="btn btn-lg btn-primary btn-block" id="register" type="button" value="Register" style="" onclick="goReg()"/> 
           </div>
      </div>
     </div>
     </form>
   </div><!--container-->
    <!-- Bootstrap core JavaScript
    ================================================== -->
    <script src="/site_media/dist/js/jquery-2.1.0.min.js"></script>
    <script src="/site_media/iCheck-master/icheck.js"></script>
    <script src="/site_media/dist/js/bootstrap.min.js"></script>
    <script>
    $(function(){
    $("#submit").click(function(){
       //alert($("#userid").val());
        $.post("/index/login/",
        { 
            userID:$("#userid").val(),
           password:$("#password").val() 
        },
        function(data, status){
            if(data == 'success'){
             window.location = '/index/problemList';
            }else if(data == 'password error!'){
                  alert('password error');	   
 		}
            else{
                alert(data);  
             }
        });
      });   
    });
    function goReg() {
        window.location.href='/index/register/';
    }
   </script>
   <script>
     $(document).ready(function(){
         $('input').iCheck({
               checkboxClass: 'icheckbox_flat-green',
             });
      });
    
    </script>
    <script language="javascript" type="text/javascript">
		function checkID(){
			var id = document.getElementById("userID").value;
			var reg = new RegExp("^[0-9,a-z,A-Z]*$");
			if( !reg.test(id)){
				alert("userID只能为字母或数字");
				document.getElementById("userID").value = "";
			}else{
				
			}
		}
	</script>
   <!-- Placed at the end of the document so the pages load faster -->
  </body>
</html>
